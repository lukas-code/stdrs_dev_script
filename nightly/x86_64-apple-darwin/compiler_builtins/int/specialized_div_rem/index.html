<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This `specialized_div_rem` module is originally from version 1.0.0 of the `specialized-div-rem` crate. Note that `for` loops with ranges are not used in this module, since unoptimized compilation may generate references to `memcpy`."><title>compiler_builtins::int::specialized_div_rem - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-2fcac8296ac587d8.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="compiler_builtins" data-themes="" data-resource-suffix="" data-rustdoc-version="1.72.0-nightly (b2b34bd83 2023-06-06)" data-search-js="search-4926e5fc22a5646a.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="../../../static.files/main-48600a9606eff342.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"><script src="/stdrs_dev_script/nav.js"></script>
</head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../compiler_builtins/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../compiler_builtins/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module specialized_div_rem</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">compiler_builtins</a>::<wbr><a href="../index.html">int</a>::<wbr><a class="mod" href="#">specialized_div_rem</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/compiler_builtins/int/specialized_div_rem/mod.rs.html#2-309">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This <code>specialized_div_rem</code> module is originally from version 1.0.0 of the
<code>specialized-div-rem</code> crate. Note that <code>for</code> loops with ranges are not used in this
module, since unoptimized compilation may generate references to <code>memcpy</code>.</p>
<p>The purpose of these macros is to easily change the both the division algorithm used
for a given integer size and the half division used by that algorithm. The way
functions call each other is also constructed such that linkers will find the chain of
software and hardware divisions needed for every size of signed and unsigned division.
For example, most target compilations do the following:</p>
<ul>
<li>Many 128 bit division functions like <code>u128::wrapping_div</code> use
<code>std::intrinsics::unchecked_div</code>, which gets replaced by <code>__udivti3</code> because there
is not a 128 bit by 128 bit hardware division function in most architectures.
<code>__udivti3</code> uses <code>u128_div_rem</code> (this extra level of function calls exists because
<code>__umodti3</code> and <code>__udivmodti4</code> also exist, and <code>specialized_div_rem</code> supplies just
one function to calculate both the quotient and remainder. If configuration flags
enable it, <code>impl_trifecta!</code> defines <code>u128_div_rem</code> to use the trifecta algorithm,
which requires the half sized division <code>u64_by_u64_div_rem</code>. If the architecture
supplies a 64 bit hardware division instruction, <code>u64_by_u64_div_rem</code> will be
reduced to those instructions. Note that we do not specify the half size division
directly to be <code>__udivdi3</code>, because hardware division would never be introduced.</li>
<li>If the architecture does not supply a 64 bit hardware division instruction, u64
divisions will use functions such as <code>__udivdi3</code>. This will call <code>u64_div_rem</code>
which is defined by <code>impl_delegate!</code>. The half division for this algorithm is
<code>u32_by_u32_div_rem</code> which in turn becomes hardware division instructions or more
software division algorithms.</li>
<li>If the architecture does not supply a 32 bit hardware instruction, linkers will
look for <code>__udivsi3</code>. <code>impl_binary_long!</code> is used, but this  algorithm uses no half
division, so the chain of calls ends here.</li>
</ul>
<p>On some architectures like x86_64, an asymmetrically sized division is supplied, in
which 128 bit numbers can be divided by 64 bit numbers. <code>impl_asymmetric!</code> is used to
extend the 128 by 64 bit division to a full 128 by 128 bit division.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="asymmetric/index.html" title="mod compiler_builtins::int::specialized_div_rem::asymmetric">asymmetric</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="mod" href="binary_long/index.html" title="mod compiler_builtins::int::specialized_div_rem::binary_long">binary_long</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="mod" href="delegate/index.html" title="mod compiler_builtins::int::specialized_div_rem::delegate">delegate</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="mod" href="norm_shift/index.html" title="mod compiler_builtins::int::specialized_div_rem::norm_shift">norm_shift</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li><li><div class="item-name"><a class="mod" href="trifecta/index.html" title="mod compiler_builtins::int::specialized_div_rem::trifecta">trifecta</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li></ul><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><ul class="item-table"><li><div class="item-name"><a class="constant" href="constant.USE_LZ.html" title="constant compiler_builtins::int::specialized_div_rem::USE_LZ">USE_LZ</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.u32_by_u32_div_rem.html" title="fn compiler_builtins::int::specialized_div_rem::u32_by_u32_div_rem">u32_by_u32_div_rem</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Divides <code>duo</code> by <code>div</code> and returns a tuple of the quotient and the remainder.
<code>checked_div</code> and <code>checked_rem</code> are used to avoid bringing in panic function
dependencies.</div></li><li><div class="item-name"><a class="fn" href="fn.u32_div_rem.html" title="fn compiler_builtins::int::specialized_div_rem::u32_div_rem">u32_div_rem</a></div><div class="desc docblock-short">Computes the quotient and remainder of <code>duo</code> divided by <code>div</code> and returns them as a
tuple.</div></li><li><div class="item-name"><a class="fn" href="fn.u32_normalization_shift.html" title="fn compiler_builtins::int::specialized_div_rem::u32_normalization_shift">u32_normalization_shift</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Finds the shift left that the divisor <code>div</code> would need to be normalized for a binary
long division step with the dividend <code>duo</code>. NOTE: This function assumes that these edge
cases have been handled before reaching it:
<code>if div == 0 { panic!(&quot;attempt to divide by zero&quot;) } if duo &lt; div { return (0, duo) }</code></div></li><li><div class="item-name"><a class="fn" href="fn.u64_by_u64_div_rem.html" title="fn compiler_builtins::int::specialized_div_rem::u64_by_u64_div_rem">u64_by_u64_div_rem</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Divides <code>duo</code> by <code>div</code> and returns a tuple of the quotient and the remainder.
<code>checked_div</code> and <code>checked_rem</code> are used to avoid bringing in panic function
dependencies.</div></li><li><div class="item-name"><a class="fn" href="fn.u64_div_rem.html" title="fn compiler_builtins::int::specialized_div_rem::u64_div_rem">u64_div_rem</a></div><div class="desc docblock-short">Computes the quotient and remainder of <code>duo</code> divided by <code>div</code> and returns them as a
tuple.</div></li><li><div class="item-name"><a class="fn" href="fn.u64_normalization_shift.html" title="fn compiler_builtins::int::specialized_div_rem::u64_normalization_shift">u64_normalization_shift</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">Finds the shift left that the divisor <code>div</code> would need to be normalized for a binary
long division step with the dividend <code>duo</code>. NOTE: This function assumes that these edge
cases have been handled before reaching it:
<code>if div == 0 { panic!(&quot;attempt to divide by zero&quot;) } if duo &lt; div { return (0, duo) }</code></div></li><li><div class="item-name"><a class="fn" href="fn.u128_by_u64_div_rem.html" title="fn compiler_builtins::int::specialized_div_rem::u128_by_u64_div_rem">u128_by_u64_div_rem</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> <sup title="unsafe function">âš </sup></div><div class="desc docblock-short">Divides <code>duo</code> by <code>div</code> and returns a tuple of the quotient and the remainder.</div></li><li><div class="item-name"><a class="fn" href="fn.u128_div_rem.html" title="fn compiler_builtins::int::specialized_div_rem::u128_div_rem">u128_div_rem</a></div><div class="desc docblock-short">Computes the quotient and remainder of <code>duo</code> divided by <code>div</code> and returns them as a
tuple.</div></li><li><div class="item-name"><a class="fn" href="fn.zero_div_fn.html" title="fn compiler_builtins::int::specialized_div_rem::zero_div_fn">zero_div_fn</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="desc docblock-short">The behavior of all divisions by zero is controlled by this function. This function should be
impossible to reach by Rust users, unless <code>compiler-builtins</code> public division functions or
<code>core/std::unchecked_div/rem</code> are directly used without a zero check in front.</div></li></ul></section></div></main></body></html>