<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Formats the given floating point number into the decimal form or the exponential form, depending on the resulting exponent. The result is stored to the supplied parts array while utilizing given byte buffer as a scratch. `upper` is used to determine the case of non-finite values (`inf` and `nan`) or the case of the exponent prefix (`e` or `E`). The first part to be rendered is always a `Part::Sign` (which can be an empty string if no sign is rendered)."><title>to_shortest_exp_str in core::num::flt2dec - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-2fcac8296ac587d8.css" id="mainThemeStyle"><div id="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="core" data-themes="" data-resource-suffix="" data-rustdoc-version="1.72.0-nightly (b2b34bd83 2023-06-06)" data-search-js="search-4926e5fc22a5646a.js" data-settings-js="settings-de11bff964e9d4e5.js" data-settings-css="settings-8c76f75bfb6bd192.css" data-theme-light-css="light-0f8c037637f9eb3e.css" data-theme-dark-css="dark-1097f8e92a01e3cf.css" data-theme-ayu-css="ayu-614652228113ac93.css" ></div><script src="../../../static.files/storage-62ce34ea385b278a.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-48600a9606eff342.js"></script><noscript><link rel="stylesheet" media="(prefers-color-scheme:light)" href="../../../static.files/light-0f8c037637f9eb3e.css"><link rel="stylesheet" media="(prefers-color-scheme:dark)" href="../../../static.files/dark-1097f8e92a01e3cf.css"><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"><script src="/nav.js"></script>
</head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../core/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../core/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><div class="sidebar-elems"><h2><a href="index.html">In core::num::flt2dec</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../../index.html">core</a>::<wbr><a href="../index.html">num</a>::<wbr><a href="index.html">flt2dec</a>::<wbr><a class="fn" href="#">to_shortest_exp_str</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/core/num/flt2dec/mod.rs.html#423-473">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub fn to_shortest_exp_str&lt;'a, T, F&gt;(
    format_shortest: F,
    v: T,
    sign: <a class="enum" href="enum.Sign.html" title="enum core::num::flt2dec::Sign">Sign</a>,
    dec_bounds: (<a class="primitive" href="../../primitive.i16.html">i16</a>, <a class="primitive" href="../../primitive.i16.html">i16</a>),
    upper: <a class="primitive" href="../../primitive.bool.html">bool</a>,
    buf: &amp;'a mut [<a class="union" href="../../mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;<a class="primitive" href="../../primitive.u8.html">u8</a>&gt;],
    parts: &amp;'a mut [<a class="union" href="../../mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;<a class="enum" href="../fmt/enum.Part.html" title="enum core::num::fmt::Part">Part</a>&lt;'a&gt;&gt;]
) -&gt; <a class="struct" href="../fmt/struct.Formatted.html" title="struct core::num::fmt::Formatted">Formatted</a>&lt;'a&gt;<span class="where fmt-newline">where
    T: <a class="trait" href="trait.DecodableFloat.html" title="trait core::num::flt2dec::DecodableFloat">DecodableFloat</a>,
    F: <a class="trait" href="../../ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(&amp;<a class="struct" href="struct.Decoded.html" title="struct core::num::flt2dec::Decoded">Decoded</a>, &amp;'a mut [<a class="union" href="../../mem/maybe_uninit/union.MaybeUninit.html" title="union core::mem::maybe_uninit::MaybeUninit">MaybeUninit</a>&lt;<a class="primitive" href="../../primitive.u8.html">u8</a>&gt;]) -&gt; (&amp;'a [<a class="primitive" href="../../primitive.u8.html">u8</a>], <a class="primitive" href="../../primitive.i16.html">i16</a>),</span></code></pre><span class="item-info"><div class="stab unstable"><span class="emoji">ðŸ”¬</span><span>This is a nightly-only experimental API. (<code>flt2dec</code>)</span></div></span><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Formats the given floating point number into the decimal form or
the exponential form, depending on the resulting exponent. The result is
stored to the supplied parts array while utilizing given byte buffer
as a scratch. <code>upper</code> is used to determine the case of non-finite values
(<code>inf</code> and <code>nan</code>) or the case of the exponent prefix (<code>e</code> or <code>E</code>).
The first part to be rendered is always a <code>Part::Sign</code> (which can be
an empty string if no sign is rendered).</p>
<p><code>format_shortest</code> should be the underlying digit-generation function.
It should return the part of the buffer that it initialized.
You probably would want <code>strategy::grisu::format_shortest</code> for this.</p>
<p>The <code>dec_bounds</code> is a tuple <code>(lo, hi)</code> such that the number is formatted
as decimal only when <code>10^lo &lt;= V &lt; 10^hi</code>. Note that this is the <em>apparent</em> <code>V</code>
instead of the actual <code>v</code>! Thus any printed exponent in the exponential form
cannot be in this range, avoiding any confusion.</p>
<p>The byte buffer should be at least <code>MAX_SIG_DIGITS</code> bytes long.
There should be at least 6 parts available, due to the worst case like
<code>[+][1][.][2345][e][-][6]</code>.</p>
</div></details></section></div></main></body></html>